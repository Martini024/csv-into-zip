(this["webpackJsonpcsv-into-zip"]=this["webpackJsonpcsv-into-zip"]||[]).push([[0],{140:function(e,t,n){},141:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(20),c=n.n(o),l=(n(140),n(47)),r=n.p+"static/media/logo.6ce24c58.svg",s=n(229),u=n(223),d=n(132),j=n(228),p=n(225),b=n(51),f=(n(141),n(142),n(222)),h=n(226),m=n(227),O=n(224),v=n(119),x=n(120),g=n.n(x),w=n(121),F=n.n(w),y=n(78),z=n.n(y);function C(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.split("/").pop();return t?n:n.split(".").slice(0,-1).join(".")}function S(e){var t=!0;return!!e&&(e.forEach((function(e){var n;n=e,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(n)||(t=!1)})),t)}var N=n(12);function k(e){var t=e.onUpdate,n=e.onStartDownload,i=e.onFinishDownload,o=f.a.useForm(),c=Object(l.a)(o,1)[0],r=Object(a.useState)(null),s=Object(l.a)(r,2),u=s[0],d=s[1],j=Object(a.useState)(!1),p=Object(l.a)(j,2),x=p[0],w=p[1],y=Object(a.useState)([]),k=Object(l.a)(y,2),E=k[0],I=k[1],R=function(){w(!1),c.resetFields()},_=function(){n();var e=c.getFieldsValue();!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ROW",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"_",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"file_bundle",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(){},r=new g.a;z.a.parse(e,{download:!0,header:!0,complete:function(e){e.data.forEach((function(e){n.forEach((function(n){var c,l=null===(c=e[n])||void 0===c?void 0:c.split("\n");S(l)&&l.forEach((function(c){var l=a.map((function(t){return e[t]?e[t]:"null"})).join(i),s=C(c),u="";switch(t){case"ROW":u="".concat(o,"/").concat(l,"/").concat(n,"/").concat(s);break;case"COLUMN":u="".concat(o,"/").concat(n,"/").concat(l,"/").concat(s)}r.file(u,new Promise((function(e,t){F.a.getBinaryContent(c,(function(n,a){n?t(n):e(a)}))})),{binary:!0,createFolders:!0})}))}))})),r.generateAsync({type:"blob"},c).then((function(e){l(),Object(v.saveAs)(e,o)}))}})}(e.csvFile,e.groupBy,e.urlColumns,e.folderNameStruct,e.separator,e.zipFileName,t,i)};return Object(a.useEffect)((function(){u&&function(e){return new Promise((function(t,n){z.a.parse(e,{preview:1,complete:function(e){var n;t(null===(n=e.data)||void 0===n?void 0:n[0])},error:n})}))}(u).then((function(e){I(e.map((function(e){return{label:e,value:e}})))}))}),[u]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(b.a,{type:"primary",onClick:function(){return w(!0)},children:"Generate Zip"}),Object(N.jsx)(h.a,{visible:x,maskClosable:!1,title:"Generate Zip",onOk:function(){_(),R()},onCancel:function(){return R()},children:Object(N.jsxs)(f.a,{form:c,layout:"vertical",onFinish:_,children:[Object(N.jsx)(f.a.Item,{label:"CSV File",name:"csvFile",valuePropName:"file",getValueFromEvent:function(e){return e.target.files?e.target.files[0]:null},required:!0,children:Object(N.jsx)(m.a,{type:"file",onChange:function(e){return d(e.target.files?e.target.files[0]:null)}})}),Object(N.jsx)(f.a.Item,{label:"Group By",name:"groupBy",initialValue:"ROW",required:!0,children:Object(N.jsx)(O.a,{options:[{label:"Row - zipFolder/whose/urlColumn/file",value:"ROW"},{label:"Column - zipFolder/urlColumn/whose/file",value:"COLUMN"}]})}),Object(N.jsx)(f.a.Item,{label:"URL Columns",name:"urlColumns",required:!0,tooltip:{title:"Please choose the columns containing url for download"},children:Object(N.jsx)(O.a,{mode:"multiple",options:E})}),Object(N.jsx)(f.a.Item,{label:"Folder Name Structure",name:"folderNameStruct",required:!0,tooltip:{title:'Please choose the folder name of "whose" (concatenated by separator)'},children:Object(N.jsx)(O.a,{mode:"multiple",options:E})}),Object(N.jsx)(f.a.Item,{label:"Separator",name:"separator",initialValue:"_",required:!0,children:Object(N.jsx)(m.a,{type:"text",maxLength:"1"})}),Object(N.jsx)(f.a.Item,{label:"Zip File Name",name:"zipFileName",required:!0,children:Object(N.jsx)(m.a,{type:"text"})})]})})]})}u.a.Paragraph;var E=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(0),c=Object(l.a)(o,2),u=c[0],f=c[1];return Object(N.jsx)("div",{className:"App",children:Object(N.jsxs)("header",{className:"App-header",children:[Object(N.jsx)("img",{src:r,className:"App-logo",alt:"logo"}),Object(N.jsx)("p",{children:"Batch download files from urls inside csv file."}),Object(N.jsxs)(j.b,{direction:"vertical",children:[Object(N.jsx)(k,{onStartDownload:function(){i(!0)},onUpdate:function(e){var t=e.percent;f(t.toFixed(2))},onFinishDownload:function(){i(!1),d.b.info("Generate Zip Successfully!")}}),n&&Object(N.jsx)("div",{style:{width:"400px"},children:Object(N.jsx)(p.a,{percent:u,size:"small",status:"active"})}),Object(N.jsxs)(b.a,{type:"link",size:"large",href:"https://github.com/Martini024/csv-into-zip",target:"_blank",rel:"noopener noreferrer",children:[Object(N.jsx)(s.a,{}),"CSV into Zip"]})]})]})})};c.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(E,{})}),document.getElementById("root"))}},[[219,1,2]]]);
//# sourceMappingURL=main.f39db8ed.chunk.js.map